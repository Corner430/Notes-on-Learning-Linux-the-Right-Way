1. [文件系统层次化标准（FHS, Filesystem Hierarchy Standard）](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)：定义了 Linux 系统中的目录结构和目录内容的用途。

| 目录名称          | 应放置文件的内容                           |
|------------------|-----------------------------------------|
| /boot            | 启动 Linux 时使用的内核和引导加载程序文件        |
| /dev             | 设备文件                                  |
| /etc             | 系统配置文件                               |
| /home            | 用户主目录                                 |
| /bin             | 存放单用户下还可以使用的指令                |
| /lib             | 开机时用到的函数库, 以及/bin和/sbin下面的命令会调用的函数库 |
| /sbin            | 开机过程中需要的命令                         |
| /media           | 可移动设备的挂载点                           |
| /opt             | 第三方软件安装目录                          |
| /root            | root 用户的主目录                           |
| /srv             | 一些网络服务的数据文件目录                     |
| /tmp             | 任何人都可以使用的“共享”临时目录                |
| /proc            | 虚拟文件系统, 例如系统内核、进程、外部设备及网络状态等 |
| /usr/local       | 用户自行安装的软件                           |
| /usr/sbin        | 非系统正常运行所需要的系统管理命令和程序          |
| /usr/share       | 存放共享数据，例如一些网站的 html 文件、字体文件等 |
| /var             | 存放经常变化的文件，例如日志文件、邮件、数据库等   |
| /lost+found      | 系统异常关机后，文件系统自动检查时将一些丢失的文件片段存放在这里 |
| /mnt             | 用于暂时挂载其他文件系统或设备                  |
| /run             | 运行时文件，存储系统启动后产生的临时运行时数据，如PID文件和套接字文件 |
| /sys             | Sysfs虚拟文件系统，提供了关于内核、设备和其他系统信息的信息 |
| /var/run         | 存储运行中的进程的PID文件                     |
| /var/log         | 存储系统日志文件，包括系统事件和各种应用程序的日志 |
| /var/spool       | 通常用于存储邮件、打印队列等                   |
| /var/mail        | 用户邮箱存储目录，存储用户的邮件                |
| /var/cache       | 存储缓存文件，可以包括已安装软件包的缓存等        |
| /var/lib         | 用于存储应用程序的可变数据，例如数据库文件          |

2. 在 Linux 系统中一切都是文件，硬件设备也不例外。既然是文件，就必须有文件名称。系统内核中的 **udev 设备管理器**会自动把硬件名称规范起来，目的是让用户通过设备文件的名字可以猜出设备的属性以及分区信息等。**Linux系统中常见的硬件设备的文件名称如下表：

| 硬件设备 | 文件名称 |
|---------|---------|
| IDE硬盘 | /dev/hd[a-d] |
| SCSI/SATA/USB 硬盘 | /dev/sd[a-p] |
| 光驱 | /dev/cdrom |
| 软盘 | /dev/fd[0-1] |
| 打印机 | /dev/lp[0-2] |
| 鼠标 | /dev/mouse |
| 调制解调器 | /dev/modem |
| 串行端口 | /dev/ttyS[0-3] |
| 并行端口 | /dev/lp[0-2] |
| 声卡 | /dev/dsp |
| 随机存储器 | /dev/ram[0-15] |
| 网络接口 | /dev/eth[0-15] |

由于现在的 IDE 设备已经很少见了，所以一般的硬盘设备都会是以 “/dev/sd” 开头的。而一台主机上可以有多块硬盘，因此系统采用 a~p 来代表 16 块不同的硬盘（默认从 a 开始分配），并且硬盘的分区编号也很有讲究：
- 主分区或扩展分区的编号从 1 开始，最多可以有 4 个；
- 逻辑分区的编号从 5 开始，最多可以有 11 个。

> /dev 目录中 sda 设备之所以是 a，并不是由插槽决定的，而是由系统内核的识别顺序来决定的，而恰巧很多主板的插槽顺序就是系统内核的识别顺序，因此才会被命名为 /dev/sda。

> **分区的数字编码不一定是强制顺延下来的，也有可能是手工指定的。**因此 sda3 只能表示是编号为 3 的分区，而不能判断 sda 设备上已经存在了 3 个分区

3. 主分区、扩展分区和逻辑分区
硬件设备是由大量的扇区组成的，每个扇区的容量为 512 字节。**其中第一个扇区最重要**，它里面保存着主引导记录与分区表信息。就第一个扇区来讲，主引导记录需要占用 446 字节，分区表为 64 字节，结束符占用 2 字节；其中分区表中每记录一个分区信息就需要 16 字节，这样一来最多只有 4 个分区信息可以写到第一个扇区中，**这 4 个分区就是 4 个主分区**

现在问题来了，**第一个扇区最多只能创建出4个分区。于是为了解决分区个数不够的问题，**可以将第一个扇区的分区表中 16 字节（原本要写入主分区信息）的空间（称之为扩展分区）拿出来指向另外一个分区。**也就是说，扩展分区其实并不是一个真正的分区，而更像是一个占用 16 字节分区表空间的指针，一个指向另外一个分区的指针。**这样一来，用户一般会选择使用 3 个主分区加 1 个扩展分区的方法，然后在扩展分区中创建出数个逻辑分区，从而来满足多分区（大于 4 个）的需求。

> 一言以蔽之，所谓扩展分区，严格来讲它不是一个实际意义的分区，它仅仅是一个指向下一个分区的指针，这种指针结构将形成一个单向链表。

4. 文件系统：Ext3、Ext4、XFS、Btrfs、ReiserFS、JFS、F2FS、ZFS

5. inode 表格
inode（索引节点）表是Unix/Linux文件系统中用于管理文件和目录元数据（metadata）的数据结构。**每个文件和目录都与一个唯一的inode相关联**，inode表格中包含了有关文件或目录的重要信息。以下是典型的inode表格中包含的信息：
- **文件类型**：指示文件类型的标志，可以是普通文件、目录、符号链接等。不同的类型在inode表中有不同的标志位。
- **文件权限**：指定了文件的访问权限，包括所有者、群组和其他用户的读、写和执行权限。
- **所有者信息**：包括文件所有者的用户ID（UID）和群组ID（GID）。
- **文件大小**：文件的大小以字节为单位。
- **创建时间（ctime）**：指示文件的创建时间，通常包括文件元数据最后一次更改的时间。
- **修改时间（mtime）**：文件内容最后一次修改的时间。
- **访问时间（atime）**：文件最后一次被访问的时间。注意，某些文件系统可以禁用atime更新以提高性能。
- **链接计数**：指示有多少目录项链接到该inode，通常至少为1（本身）。
- **数据块指针**：inode中包含一些数据块指针，用于指示文件数据的位置。这些指针可以直接指向数据块，间接地指向间接块、双间接块等。
- **文件系统ID**：指示文件所在的文件系统的唯一标识符。
- **inode号**：每个inode都有一个唯一的inode号，用于在文件系统中标识inode。

inode表格的存在允许文件系统高效地管理文件和目录，以及跟踪文件的元数据。通过inode，文件系统可以快速查找文件的属性，权限和数据块的位置，而无需扫描整个文件系统。

需要注意的是，不同的文件系统可能在inode表格中存储不同的信息，**并且inode号通常用于查找和访问文件，而不是文件名**。这使得文件系统能够以高效的方式处理大量文件和目录。

6. 分区、格式化、挂载
- [mount: 用于挂载Linux系统外的文件](https://wangchujiang.com/linux-command/c/mount.html)
- [umount: 用于卸载已经加载的文件系统](https://wangchujiang.com/linux-command/c/umount.html)

**永久挂载**：
如果想让硬件设备和目录永久地进行自动关联，就必须把挂载信息按照指定的填写格式“设备文件 挂载目录 格式类型 权限选项 自检 优先级”写入到 /etc/fstab 文件中。

| 字段 | 意义|
|-----|-----|
| 设备文件 | 指定要挂载的设备文件，可以是设备文件名，也可以是设备的 UUID 或 LABEL。|
| 挂载目录 | 指定要挂载到的目录。|
| 格式类型 | 指定设备的文件系统类型，例如 ext4、ntfs、vfat 等。|
| 权限选项 | 指定设备的挂载权限，例如 rw（读写）、ro（只读）、auto（自动挂载）、noauto（不自动挂载）、exec（允许执行）、noexec（不允许执行）、sync（同步写入）、async（异步写入）、user（允许普通用户挂载）、nouser（不允许普通用户挂载）、dev（允许创建设备文件）、nodev（不允许创建设备文件）、suid（允许 SUID）、nosuid（不允许 SUID）、defaults（默认权限）等。|
| 自检 | 指定系统启动时是否自动检查设备的文件系统，例如 0（不检查）、1（检查）等。|
| 优先级 | 指定系统启动时自动检查设备文件系统的顺序，例如 0（不检查）、1（第一个检查）、2（第二个检查）等。|

例如：`/dev/sdb2 /backup ext4 defaults 0 0`

7. 添加硬盘设备
- 添加硬盘后，还需要进行分区操作，例如从中取出一个 2GB 的分区设备以供后面的操作使用。
    - [fdisk: 查看磁盘使用情况和磁盘分区](https://wangchujiang.com/linux-command/c/fdisk.html)
    - [file: 用来探测给定文件的类型](https://wangchujiang.com/linux-command/c/file.html)

- 有些时候，系统并没有自动把分区信息同步给 Linux 内核，而且这种情况似乎还比较常见。这时候就需要使用 `partprobe` 命令来强制同步分区信息给内核，以便后续的操作可以正常进行。**可以连续执行两次效果更好。**
    - [partprobe: 不重启的情况下重读分区](https://wangchujiang.com/linux-command/c/partprobe.html)

- 在对存储设备进行分区后还需要进行格式化操作。
    - [mkfs: 用于在设备上创建Linux文件系统](https://wangchujiang.com/linux-command/c/mkfs.html)

- [df: 显示磁盘的相关信息，常用 `-h` 参数](https://wangchujiang.com/linux-command/c/df.html)
- [du: 显示每个文件和目录的磁盘使用空间，常用 `-sh` 参数](https://wangchujiang.com/linux-command/c/du.html)

8. 添加交换分区
**SWAP(交换)分区是一种通过在硬盘中预先划分一定的空间，然后将把内存中暂时不常用的数据临时存放到硬盘中，以便腾出物理内存空间让更活跃的程序服务来使用的技术，其设计目的是为了解决真实物理内存不足的问题。**

在生产环境中，**SWAP分区的大小一般是物理内存的两倍**，但是在虚拟机中，**SWAP分区的大小一般是物理内存的两倍到四倍**。

- [mkswap: 建立和设置SWAP交换分区](https://wangchujiang.com/linux-command/c/mkswap.html)

`/dev/sdb2 swap swap defaults 0 0`

9. 磁盘容量配额
可以使用 `quota`命令进行磁盘容量配额管理，从而限制用户的硬盘可用容量或所能创建的最大文件个数。古老的系统可能使用 `usrquota`。

- [quota: 显示磁盘已使用的空间与限制](https://wangchujiang.com/linux-command/c/quota.html)
- xfs_quota: 一个用于管理 XFS 文件系统磁盘配额的命令行工具
- [edquota: 用于编辑指定用户或工作组磁盘配额](https://wangchujiang.com/linux-command/c/edquota.html)
