# 文件权限与归属
在Linux系统中，**一切都被视为文件**，包括硬件设备、目录、文本文件、二进制文件等。为了区分不同类型的文件，Linux使用了不同的字符来表示它们的类型。以下是常见的字符及其含义：

1. `-`（短横线）：普通文件
   普通文件包含文本内容或二进制数据，通常用于存储用户数据、配置文件、程序代码等。

2. `d`：目录
   目录是用于组织文件和其他目录的特殊文件类型。它们包含其他文件和子目录。

3. `l`：符号链接（软链接）
   符号链接是指向另一个文件或目录的特殊文件类型，类似于Windows系统中的快捷方式。它们可以跨越文件系统和目录边界。

4. `c`：字符设备文件
   字符设备文件用于与系统中的字符设备进行通信，例如键盘、鼠标等。

5. `b`：块设备文件
   块设备文件用于与系统中的块设备进行通信，例如硬盘驱动器、USB设备等。

6. `p`：命名管道（FIFO）
   命名管道是一种特殊的文件类型，用于在进程之间传递数据。

7. `s`：套接字（Socket）
   套接字是一种特殊的文件类型，用于进程之间的网络通信。

这些字符通常显示在Linux系统中执行`ls -l`命令（或其变体）时文件权限的第一个字符位置。例如，一个文件的权限为 `-rw-r--r--`，**其中第一个字符就是 `-`，表示这是一个普通文件**。

------------------------------------------------

在Linux和类Unix系统中，**文件和目录都有三种基本权限，分别是读取（Read）、写入（Write）和执行（Execute）权限**。这些权限用于控制用户对**文件和目录**的访问和操作能力。每种权限都可以在三个不同的用户级别上设置：**所有者、所属组和其他用户**。

1. 读权限（Read）：
   - 对于文件：读权限允许用户查看文件的内容。如果没有读权限，则用户无法读取文件的内容。
   - 对于目录：读权限允许用户列出目录中的文件和子目录。如果没有读权限，则用户无法查看目录内容。

2. 写权限（Write）：
   - 对于文件：写权限允许用户修改文件的内容。如果没有写权限，则用户无法修改文件，文件内容将只读。
   - 对于目录：写权限允许用户在目录中创建、删除和重命名文件和子目录。如果没有写权限，则用户无法对目录进行修改。

3. 执行权限（Execute）：
   - 对于文件：执行权限对普通文件无意义，除非它被用作可执行程序。可执行程序必须具有执行权限，以便用户能够运行它们。
   - 对于目录：执行权限允许用户访问目录中的文件和子目录。如果没有执行权限，则用户无法进入目录。

在文件系统中，每个文件和目录都有一个拥有者（所有者）、所属组（组）和其他用户（其他）的权限设置。每种权限可以用数字或符号表示。

数字表示方式：
- 读权限：4
- 写权限：2
- 执行权限：1
- 无权限：0

符号表示方式：
- 读权限：r
- 写权限：w
- 执行权限：x
- 无权限：-

例如，`-rw-r--r--` 表示一个文件，所有者有读写权限，所属组和其他用户只有读权限。

**要更改文件或目录的权限，可以使用`chmod`命令**。例如，要将文件的权限设置为 `-rw-r--r--`，可以使用以下命令：`chmod 644 filename`。

------------------------------------------------
`ls -l` 是一个在Linux和类Unix系统中用于列出文件和目录的命令，它会以长格式（long format）显示文件的详细信息，包括文件的权限、所有者、所属组、大小、修改日期等。

输出的每一行代表一个文件或目录，具体的输出格式如下：

```
-rwxr-xr-x 1 username groupname size date filename
```

这里对输出进行逐个解释：

1. `-rwxr-xr-x`：这是文件的权限字段，显示了文件所有者、所属组和其他用户的权限。
   - 第一个字符表示文件类型：`-`表示普通文件，`d`表示目录，`l`表示符号链接，`b`表示块设备，`c`表示字符设备，`p`表示命名管道（FIFO），`s`表示套接字（socket）等。
   - 接下来的三个字符（`rwx`）表示文件所有者（owner）的读、写和执行权限。
   - 接着的三个字符（`r-x`）表示文件所属组（group）的读、写和执行权限。
   - 最后的三个字符（`r-x`）表示其他用户的读、写和执行权限。

2. `1`：这是链接计数，表示指向该文件或目录的硬链接数量。

3. `username`：这是文件的所有者，表示该文件属于哪个用户。

4. `groupname`：这是文件的所属组，表示该文件属于哪个用户组。

5. `size`：这是文件的大小，以字节为单位。

6. `date`：这是文件的最后修改日期和时间。

7. `filename`：这是文件的名称。

通过`ls -l`命令，你可以查看目录中文件的详细信息，包括权限、所有者、所属组、大小和修改日期等，帮助你更好地了解文件系统的状态和配置。



# 文件的特殊权限
在Linux系统中，**SUID、SGID和SBIT是用于设置文件或目录特殊权限的三个标志**。这些特殊权限标志可以与文件或目录的权限**一起使用**，以实现特定的权限控制和功能。这些标志在文件和目录的权限字段中以额外的方式表示。

1. SUID（Set User ID）：
   - 对于文件：当SUID标志设置在一个可执行文件上时，**表示在执行该文件时，进程将以文件所有者的权限运行，而不是执行该文件的用户的权限**。
   - 对于目录：在目录上设置SUID标志没有实际作用。

   表示SUID标志的符号是一个小写的 `s`，当没有执行权限时则为大写的 `S`。

2. SGID（Set Group ID）：
   - 对于文件：当SGID标志设置在一个可执行文件上时，**表示在执行该文件时，进程将以文件所属组的权限运行，而不是执行该文件的用户的权限。**
   - 对于目录：当SGID标志设置在一个目录上时，**表示在该目录下新创建的文件和目录将继承该目录的所属组，而不是创建者的默认组**。

   表示SGID标志的符号是一个小写的 `s`，当没有执行权限时则为大写的 `S`。

3. SBIT（Sticky Bit）：
   - 对于目录：当SBIT标志设置在一个目录上时，**表示只有文件的所有者、目录的所有者或超级用户才能删除在此目录下其他用户创建的文件，即保护目录中的文件不被其他非所有者用户删除**。

   表示SBIT标志的符号是一个小写的 `t`，当没有执行权限时则为大写的 `T`。

> 其实，**文件能否被删除并不取决于自身的权限，而是取决于其所在的目录的权限**。如果目录的权限允许用户删除文件，那么用户就可以删除该目录下的任何文件，即使文件的权限不允许用户删除它们。



# 文件的隐藏属性
Linux 系统中的文件除了具备一般权限和特殊权限之外，**还有一种隐藏权限，即被隐藏起来的权限**，默认情况下不能直接被用户发觉。
通过 `chattr` 和 `lsattr` 命令可以查看和设置文件的隐藏属性。

# 文件的访问控制列表
在Linux中，文件访问控制列表（Access Control List，ACL）是一种扩展的权限机制，**允许对文件和目录授予更精细的访问控制**。默认情况下，Linux使用基于所有者、所属组和其他用户的传统权限模型来控制文件和目录的访问权限。但是，有时候这种模型不够灵活，**特别是当涉及到多个用户或组需要不同权限时**，这就是ACL发挥作用的时候。

ACL允许管理员为**单个文件或目录中的多个用户和组设置不同的权限**。ACL可以为特定用户或组分配特定的权限，而不影响文件的其他用户和组的权限。这样，ACL提供了更细粒度的权限控制，增加了系统的灵活性。

基本的Linux文件ACL权限包括：

- `r`：读取权限（read）
- `w`：写入权限（write）
- `x`：执行权限（execute）

在访问控制列表中，每个用户或组可以被授予上述权限的任意组合。要使用ACL，文件系统必须以支持ACL的模式挂载。

常用的ACL相关命令：

1. `getfacl`：查看文件或目录的ACL权限。
2. `setfacl`：设置文件或目录的ACL权限。
3. `chmod`：设置基本权限，ACL权限的基础。

举例说明，假设有一个文件 `example.txt`，我们希望用户A拥有读取和写入权限，用户B拥有读取和执行权限，但是其他用户只能拥有读取权限。这样的ACL权限设置如下：

```
$ setfacl -m u:userA:rw- example.txt
$ setfacl -m u:userB:r-x example.txt
$ setfacl -m o::r-- example.txt
```

通过以上ACL设置，文件 `example.txt` 将具有以下权限：

```
-rw-r-----+ userA userB
```

**其中，`+` 符号表示ACL权限已经启用**。这样，用户A和用户B拥有了不同于其他用户的特定权限。

